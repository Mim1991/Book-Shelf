<% if activity.trackable %>
  <%=link_to activity.trackable.user.first_name, activity.trackable.user %>
  moved <%= link_to activity.trackable.name, book_path(activity.trackable)  %> 
  to the <%= activity.trackable.shelf %> in their library. Check out their other books.
<% else %>
  <% user = User.find(activity.owner_id) %>
  <%= link_to user.first_name, user_path(user) %> updated a book but has since removed it from their library.
<% end %>